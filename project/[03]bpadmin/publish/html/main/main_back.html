<!DOCTYPE html>
<html lang="ko">
  <!--output:../../../publish/html/include/head.html-->
  <head>
      <title>RCS</title>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <meta name="description" content="">
      <link rel="stylesheet" type="text/css" href="../css/layout.css" media="all">
      <link rel="stylesheet" type="text/css" href="../css/content.css" media="all">
      <script type="text/javascript" src="../js/vue.js"></script>
  </head>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="https://unpkg.com/vuejs-datepicker"></script>
  <script src="https://unpkg.com/vuejs-datepicker/dist/locale/translations/ko.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.1/axios.min.js"></script>
  <script src="https://unpkg.com/vuetable-2@1.6.0"></script>
  <body>
    <div style="width:400px; height:400px; margin:100px auto;" class="chart_wrap">
      <canvas id="myChart" width="400" height="400"></canvas>
    </div>
    <div style="width:400px; height:30px; margin:10px auto;" class="date_picker">
      <vuejs-datepicker :language="ko"></vuejs-datepicker>
    </div>
    <div class="data_table_wrap">
      <div class="ui container">
        <vuetable ref="vuetable" api-url="https://vuetable.ratiw.net/api/users" :fields="fields" pagination-path="" @vuetable:pagination-data="onPaginationData">
          <template slot="actions" scope="props">
            <div class="table-button-container">
                <button class="ui button" @click="editRow(props.rowData)"><i class="fa fa-edit"></i> Edit</button>&nbsp;&nbsp;
                <button class="ui basic red button" @click="deleteRow(props.rowData)"><i class="fa fa-remove"></i> Delete</button>&nbsp;&nbsp;
            </div>
          </template>
        </vuetable>
        <vuetable-pagination ref="pagination" @vuetable-pagination:change-page="onChangePage" ></vuetable-pagination>
      </div>
    </div>
    <script>
      Vue.use(Vuetable);
      new Vue({
        el: '.data_table_wrap',
        components:{
         'vuetable-pagination': Vuetable.VuetablePagination
        },
        data: {
        fields: ['name', 'email','birthdate','nickname','gender','__slot:actions']
        },
        computed:{
        /*httpOptions(){
          return {headers: {'Authorization': "my-token"}} //table props -> :http-options="httpOptions"
        },*/
       },
       methods: {
          onPaginationData (paginationData) {
            this.$refs.pagination.setPaginationData(paginationData)
          },
          onChangePage (page) {
            this.$refs.vuetable.changePage(page)
          },
          editRow(rowData){
            alert("You clicked edit on"+ JSON.stringify(rowData))
          },
          deleteRow(rowData){
            alert("You clicked delete on"+ JSON.stringify(rowData))
          }
        }
      })
      const app = new Vue({
        el: '.date_picker',
        data() {
          return {
            ko: vdp_translation_ko.js
          }
        },
        methods: {
          customFormatter(date) {
            return moment(date).format('MMMM Do YYYY, h:mm:ss a');
          }
        },
        components: {
        	vuejsDatepicker
        }
      })
      var ctx = document.getElementById('myChart').getContext('2d');
      var myChart = new Chart(ctx, {
          type: 'bar',
          data: {
              labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
              datasets: [{
                  label: '# of Votes',
                  data: [12, 19, 3, 5, 2, 3],
                  backgroundColor: [
                      'rgba(255, 99, 132, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(255, 206, 86, 0.2)',
                      'rgba(75, 192, 192, 0.2)',
                      'rgba(153, 102, 255, 0.2)',
                      'rgba(255, 159, 64, 0.2)'
                  ],
                  borderColor: [
                      'rgba(255, 99, 132, 1)',
                      'rgba(54, 162, 235, 1)',
                      'rgba(255, 206, 86, 1)',
                      'rgba(75, 192, 192, 1)',
                      'rgba(153, 102, 255, 1)',
                      'rgba(255, 159, 64, 1)'
                  ],
                  borderWidth: 1
              }]
          },
          options: {
              scales: {
                  yAxes: [{
                      ticks: {
                          beginAtZero: true
                      }
                  }]
              }
          }
      });
    </script>
  </body>
</html>
